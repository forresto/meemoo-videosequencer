<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Meemoo AV Sequencer by Sembiki Interactive</title>
  
  <script type="text/javascript" src="lib/modernizr.custom.js"></script>
  <script type="text/javascript">
  
    var hasFeatures = Modernizr.localstorage && Modernizr.video && Modernizr.audio;
    
    yepnope({
      test : hasFeatures,
      yep  : [
        'http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js',
        'http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/jquery-ui.min.js',
        'lib/underscore.js',
        'lib/backbone.js',
        'lib/backbone-localstorage.js',
        'meemoo-composition.js',
        'meemoo-video.js',
        'meemoo-player.js',
        'meemoo-pattern.js',
        'meemoo-patterntrack.js',
        'meemoo-sequence.js',
        'meemoo.js',
        'meemoo.css'
      ],
      complete : function(){
        if (hasFeatures) {
          // load skin
          yepnope('http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/themes/eggplant/jquery-ui.css');
          // load application
          $(document).ready(function() {
            window.App = new AppView();
            App.initializeCompositions();
          });
        }
      }
    });
    
  </script>
  
</head>
<body>

  <div id="intro">
    You need JavaScript and a modern web broswer to load this application. Chrome 10+ or Firefox 4+ is probably your best bet.
  </div>
  <div id="application">
  </div>





<!-- Application templates --> 


<script type="text/template" id="application-template">

  <div id="container">
    <iframe src="viewer.html" id="viewer" name="inviewer"></iframe>
    <button id="popoutbutton">Popout Viewer</button>
  </div>
  <div id="setup">
    <section>
      <h1>Compositions</h1>
      <div id="compositions">
        <div class="additem">
          <button id="newcomposition" type="button">New</button>
          <button id="loadcomposition" type="button">Open...</button>
        </div>
        <div id="comp_dialog" class="dialog" title="Load">
          <div>
            <h2>Import from text</h2>
            <textarea id="comp_import_text"></textarea>
            <button id="comp_import_button" type="button">Import</button>
          </div>
          <h2>Saved compositions</h2>
        </div>
        <div id="comp_export_dialog" class="dialog" title="Copy this text to share:">
          <textarea id="comp_export_text"></textarea>
        </div>
      </div>
    </section>
  </div>

</script>


<script type="text/template" id="composition-template">
  
  <section>
    <div id="comp_info">
      <h2 class="comp_info_title editable" contenteditable="true" title="Click to edit title"><%= this.model.get("title") %></h2>
      <p class="comp_info_mixer editable" contenteditable="true" title="Click to edit mixer name"><%= this.model.get("mixer") %></p>
      <p class="comp_info_description editable" contenteditable="true" title="Click to edit description"><%= this.model.get("description") %></p>
      <p><input class="comp_info_bpm" type="number" min="0" max="500" value="<%= this.model.get("bpm") %>"></input> bpm</p>
    </div>
    <button class="composition-save-button" type="button">Save</button>
    <button class="composition-export-button" type="button">Export as text...</button>
  </section>
  <section>
    <h1>Players</h1>
    <div class="players">
      <div class="additem">
        <form onSubmit="return false;">
          <input type="text" class="addplayerid" value="" /><button class="comp-add-player">Add Player</button>
        </form>
      </div>
    </div>
  </section>
  <section>
    <h1>Multitriggers</h1>
    <div class="multitriggers">
      <button class="automulti navigable" tabindex="0">
        Trigger 0-9 of the first four
      </button>
      <button class="automulti2 navigable" tabindex="0">
        All triggers of all players
      </button>
    </div>
  </section>
  <section>
    <h1>Patterns</h1>
    <div class="patterns">
      <div class="patterns-tabs">
        <ul class="patterns-tabs-nav">
          <li class="addpatternli"><a class="pattern-add-link addlink">+ Add Pattern</a></li>
        </ul>
      </div>
    </div>
  </section>
  <section style="display:none">
    <h1>Sequencers</h1>
    <div class="sequencers">
      <button class="sequencer-add" type="button">Add Sequencer</button>
    </div>
  </section>
  <!--
  <section>
    <h1>Videos</h1>
    <div id="videos">
      <ul id="videos-nav"></ul>
    </div>
  </section>
  <section>
    <h1>Multitriggers</h1>
    <div id="multitriggers">
      <div id="multitriggers-tabs">
        <ul id="multitriggers-tabs-nav">
          <li id="addmultili"><a id="addmultitrigger" class="addlink">+ Add Set</a></li>
        </ul>
      </div>
    </div>
  </section>
  -->
  
</script>


<script type="text/template" id="control-template"> 

  <div id="control_<%= id %>" class="controls video_<%= video_id %>">
    <div class="controlitemcell">
      <h2 class="title" title="Video <%= this.model.Video.cid %>"><%= id %></h2>
    </div>
    <div class="controlitemcell">
      <button class="playbutton" type="button">Play</button>
    </div>
    <div class="controlitemcell">
      <button class="pausebutton" type="button">Pause</button>
    </div>
    <div class="controlitemcell">
      <button class="mutebutton" type="button">Mute</button>
    </div>
    <div class="controlitemcell">
      <button class="unmutebutton" type="button">Unmute</button>
    </div>
    <div class="controlitemcell">
      <div class="volumeslider" title="Volume slider"></div>
    </div>
    <div class="controlitemcell">
      <button class="addtriggerbutton" type="button">Add trigger at current playhead location.</button>
    </div>
    <div class="controlitemcell">
      <p id="statusmessage_<%= id %>" class="statusmessage">Loading...</p>
    </div>
    <div class="controlitemcell">
      <button class="removebutton" type="button">Remove this video.</button>
    </div>
  </div>
  <div class="showtriggers showtriggers_<%= video_id %>"></div>
  <div id="playprogress_<%= this.model.cid %>" class="playprogress navigable" tabindex="0" style="height:18px;"></div>
  <div id="loadprogress_<%= this.model.cid %>" class="loadprogress" style="height:7px;"></div>

</script>


<script type="text/template" id="composition-list-template"> 

  <span title="<%= this.model.get('description') %>">
    <%= this.model.cid %>: <%= this.model.get('title') %>
  </span>
  <button class="comp_load_button" type="button">Load</button>
  <button class="comp_export_button" type="button">Export...</button>
  <button class="comp_delete_button" type="button">Delete</button>

</script>

<script type="text/template" id="pattern-template"> 
  <div>
    Pattern <div class="pattern_trigger beat navigable"><%= App.triggers[this.model.get("trigger_id")] %></div>
    <button class="pattern_play_button" type="button">Play/Cue</button>
    <button class="pattern_stop_button" type="button">Stop</button>
    <input class="pattern_chance navigable" id="pattern_<%= this.model.cid %>_beats" type="number" min="0" max="100" step="1" value="<%= this.model.get('chance') %>"></input> chance
    <input class="pattern_beats navigable" id="pattern_<%= this.model.cid %>_beats" type="number" min="1" max="64" step="1" value="<%= this.model.get('beats') %>"></input> beats
    <button class="pattern_addtrack_button" type="button">Add Track</button>
    Next <div class="pattern_next beat navigable"><%= App.triggers[this.model.get("next")] %></div>
  </div>
  <div id="pattern_<%= this.model.cid %>_newtrack_dialog" class="pattern_newtrack_dialog dialog" title="Choose a player:">
  </div>
  <div class="pattern_tracks">
  </div>
</script>

<script type="text/template" id="track-template">
  Player <%= this.model.get("Player").cid %>
</script>

<script type="text/template" id="sequence-template"> 
  <div>
    Sequence <%= this.model.cid %> 
    <button class="sequence_play_button" type="button">Play</button>
    <button class="sequence_stop_button" type="button">Stop</button>
    <input class="sequence_length navigable" id="pattern_<%= this.model.cid %>_beats" type="number" min="1" max="64" step="1" value="<%= this.model.get('length') %>"></input> beats
  </div>
  <div class="sequence_track">
  </div>
</script>






<!-- Analytics --> 

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-274009-19']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</body>
</html>
